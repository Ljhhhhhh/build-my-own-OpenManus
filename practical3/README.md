# é¡¹ç›®3ï¼šåŸºç¡€å·¥å…·æ¡†æ¶

## ğŸ¯ é¡¹ç›®ç›®æ ‡

åŸºäºé¡¹ç›®1å’Œé¡¹ç›®2çš„åŸºç¡€ï¼Œå­¦ä¹ å¦‚ä½•ä¸ºAIä»£ç†æ„å»ºå¯æ‰©å±•çš„å·¥å…·ç³»ç»Ÿï¼š

- ğŸ”§ **å·¥å…·æŠ½è±¡**ï¼šå­¦ä¹ æŠ½è±¡åŸºç±»(ABC)å’Œæ¥å£è®¾è®¡
- ğŸ“‹ **JSON Schema**ï¼šæŒæ¡å·¥å…·å‚æ•°çš„ç»“æ„åŒ–å®šä¹‰
- ğŸ”Œ **æ’ä»¶æ¶æ„**ï¼šç†è§£åŠ¨æ€æ³¨å†Œå’Œç®¡ç†å·¥å…·çš„æœºåˆ¶
- âš ï¸ **é”™è¯¯å¤„ç†**ï¼šç»Ÿä¸€çš„ç»“æœæ ¼å¼å’Œå¼‚å¸¸å¤„ç†

## ğŸŒŸ æ ¸å¿ƒç‰¹æ€§

### 1. å·¥å…·åŸºç±»ç³»ç»Ÿ
- `BaseTool`ï¼šæ‰€æœ‰å·¥å…·çš„æŠ½è±¡åŸºç±»
- `ToolResult`ï¼šç»Ÿä¸€çš„å·¥å…·æ‰§è¡Œç»“æœæ ¼å¼
- `ToolResultStatus`ï¼šæ‰§è¡ŒçŠ¶æ€æšä¸¾

### 2. å…·ä½“å·¥å…·å®ç°
- `CalculatorTool`ï¼šå®‰å…¨çš„æ•°å­¦è®¡ç®—å™¨
- `WeatherTool`ï¼šå¤©æ°”æŸ¥è¯¢å·¥å…·
- å¯æ‰©å±•çš„å·¥å…·æ¶æ„

### 3. å·¥å…·ç®¡ç†å™¨
- `ToolManager`ï¼šå·¥å…·çš„æ³¨å†Œã€ç®¡ç†å’Œæ‰§è¡Œ
- åŠ¨æ€å·¥å…·å‘ç°å’Œè°ƒç”¨
- å‚æ•°éªŒè¯å’Œé”™è¯¯å¤„ç†

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–
```bash
cd practical3
pip install -r requirements.txt
```

### 2. é…ç½®ç¯å¢ƒå˜é‡
```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿
cp .env.example .env

# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œå¡«å…¥ä½ çš„APIå¯†é’¥
```

### 3. è¿è¡Œæ¼”ç¤º
```bash
# è¿è¡ŒåŸºç¡€å·¥å…·æ¼”ç¤º
python tool_demo.py

# è¿è¡Œå®Œæ•´çš„å·¥å…·æ¡†æ¶æ¼”ç¤º
python main.py
```

## ğŸ“š å­¦ä¹ è¦ç‚¹

### 1. **æŠ½è±¡åŸºç±» (ABC)**
```python
from abc import ABC, abstractmethod

class BaseTool(ABC):
    @abstractmethod
    async def execute(self, **kwargs):
        pass
```
- å®šä¹‰æ¥å£è§„èŒƒ
- å¼ºåˆ¶å­ç±»å®ç°å¿…è¦æ–¹æ³•
- æä¾›ä»£ç ç»“æ„å’Œä¸€è‡´æ€§

### 2. **JSON Schema**
```python
def get_schema(self) -> Dict[str, Any]:
    return {
        "type": "object",
        "properties": {
            "expression": {
                "type": "string",
                "description": "æ•°å­¦è¡¨è¾¾å¼"
            }
        },
        "required": ["expression"]
    }
```
- å®šä¹‰å·¥å…·å‚æ•°ç»“æ„
- æ”¯æŒè‡ªåŠ¨éªŒè¯å’Œæ–‡æ¡£ç”Ÿæˆ
- æ ‡å‡†åŒ–çš„æ¥å£æè¿°

### 3. **æ’ä»¶æ¶æ„**
```python
manager = ToolManager()
manager.register_tool(CalculatorTool())
manager.register_tool(WeatherTool(api_key))
```
- åŠ¨æ€æ³¨å†Œå·¥å…·
- æ¾è€¦åˆçš„è®¾è®¡
- æ˜“äºæ‰©å±•å’Œç»´æŠ¤

### 4. **ç»Ÿä¸€é”™è¯¯å¤„ç†**
```python
class ToolResult(BaseModel):
    status: ToolResultStatus
    content: Any
    error_message: Optional[str]
```
- æ ‡å‡†åŒ–çš„è¿”å›æ ¼å¼
- æ¸…æ™°çš„æˆåŠŸ/å¤±è´¥çŠ¶æ€
- è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯

## ğŸ“ æ–‡ä»¶ç»“æ„

```
practical3/
â”œâ”€â”€ tools/
â”‚   â”œâ”€â”€ __init__.py          # å·¥å…·åŒ…åˆå§‹åŒ–
â”‚   â”œâ”€â”€ base.py              # åŸºç¡€å·¥å…·ç±»å’Œç»“æœæ¨¡å‹
â”‚   â”œâ”€â”€ calculator.py        # è®¡ç®—å™¨å·¥å…·
â”‚   â”œâ”€â”€ weather.py           # å¤©æ°”æŸ¥è¯¢å·¥å…·
â”‚   â””â”€â”€ manager.py           # å·¥å…·ç®¡ç†å™¨
â”œâ”€â”€ main.py                  # ä¸»ç¨‹åºå…¥å£
â”œâ”€â”€ tool_demo.py             # å·¥å…·æ¼”ç¤ºè„šæœ¬
â”œâ”€â”€ requirements.txt         # ä¾èµ–æ–‡ä»¶
â”œâ”€â”€ .env.example            # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â””â”€â”€ README.md               # é¡¹ç›®æ–‡æ¡£
```

## ğŸ”— ä¸å‰é¢é¡¹ç›®çš„å…³ç³»

- **é¡¹ç›®1åŸºç¡€**ï¼šç»§æ‰¿åŸºæœ¬çš„OpenAIå®¢æˆ·ç«¯å’Œç¯å¢ƒé…ç½®
- **é¡¹ç›®2è¿›é˜¶**ï¼šä½¿ç”¨Pydanticè¿›è¡Œæ•°æ®éªŒè¯å’Œé…ç½®ç®¡ç†
- **é¡¹ç›®3æ‰©å±•**ï¼šåœ¨å‰ä¸¤ä¸ªé¡¹ç›®åŸºç¡€ä¸Šï¼Œæ„å»ºå¯æ‰©å±•çš„å·¥å…·ç³»ç»Ÿ

## ğŸ’¡ Pythonå°ç™½å­¦ä¹ é‡ç‚¹

1. **æŠ½è±¡åŸºç±»**ï¼šç†è§£æ¥å£å’Œç»§æ‰¿çš„æ¦‚å¿µ
2. **å¼‚æ­¥ç¼–ç¨‹**ï¼šæŒæ¡async/awaitçš„ä½¿ç”¨
3. **ç±»å‹æ³¨è§£**ï¼šå­¦ä¹ Pythonçš„ç±»å‹ç³»ç»Ÿ
4. **è®¾è®¡æ¨¡å¼**ï¼šç†è§£æ’ä»¶æ¨¡å¼å’Œå·¥å‚æ¨¡å¼
5. **é”™è¯¯å¤„ç†**ï¼šå­¦ä¹ å¼‚å¸¸å¤„ç†çš„æœ€ä½³å®è·µ